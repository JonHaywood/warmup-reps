
<!DOCTYPE html> 
<html> 

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<title>Warmup Calculator</title> 
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
	<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>

	<script type="text/javascript">

		var warmupApp = {
			"metric" : false,
			barWeight : function() {
				return warmupApp.metric ? 20 : 45;
			},
			weights : function() {
				if (warmupApp.metric)
					return [20, 15, 10, 5, 2.5, 1.25];
				else
					return [45, 35, 25, 10, 5, 2.5];
			},
			"programs" : []
		}

		$(document).ready(function() {
			$.ajax({
				url: 'programs/starting_strength.json',
				dataType: 'json',
				success: function(data) {
			    warmupApp.programs.push(data);
				},
				async: false
			});

			$('input').attr('min', warmupApp.barWeight());

			$('#squats-weight-container').change(function() {updateSquatsWorkout();});
			$('#bench-weight-container').change(function() {updateBenchWorkout();});
			$('#deadlift-weight-container').change(function() {updateDeadliftWorkout();});
			$('#press-weight-container').change(function() {updatePressWorkout();});
			$('#powerclean-weight-container').change(function() {updatePowerCleanWorkout();});
			$('#rows-weight-container').change(function() {updateRowsWorkout();});

			$('#units').change(function() {
				warmupApp.metric = !warmupApp.metric;

				$('input').attr('min', warmupApp.barWeight().toString());

				updateSquatsWorkout();
				updateBenchWorkout();
				updateDeadliftWorkout();
				updatePressWorkout();
				updatePowerCleanWorkout();
				updateRowsWorkout();
			});

			$('#squats-link').click(function() {
				if ($('#squats-warmup li:first').text() == "") 
					updateSquatsWorkout();
			});

			$('#bench-link').click(function() {
				if ($('#bench-warmup li:first').text() == "") 
					updateBenchWorkout();
			});

			$('#deadlift-link').click(function() {
				if ($('#deadlift-warmup li:first').text() == "") 
					updateDeadliftWorkout();
			});			

			$('#press-link').click(function() {
				if ($('#press-warmup li:first').text() == "") 
					updatePressWorkout();
			});			

			$('#powerclean-link').click(function() {
				if ($('#powerclean-warmup li:first').text() == "") 
					updatePowerCleanWorkout();
			});			

			$('#rows-link').click(function() {
				if ($('#rows-warmup li:first').text() == "") 
					updateRowsWorkout();
			});			
		});

		function updateSquatsWorkout() {			
			updateWorkout($('#squats-warmup'), $('#squats-weight').val(), warmupApp.programs[0].exercises[0])
		}
		
		function updateBenchWorkout() {
			updateWorkout($('#bench-warmup'), $('#bench-weight').val(), warmupApp.programs[0].exercises[1])
		}	

		function updateDeadliftWorkout() {
			updateWorkout($('#deadlift-warmup'), $('#deadlift-weight').val(), warmupApp.programs[0].exercises[2])
		}	

		function updatePressWorkout() {
			updateWorkout($('#press-warmup'), $('#press-weight').val(), warmupApp.programs[0].exercises[3])
		}	

		function updatePowerCleanWorkout() {
			updateWorkout($('#powerclean-warmup'), $('#powerclean-weight').val(), warmupApp.programs[0].exercises[4])
		}	

		function updateRowsWorkout() {
			updateWorkout($('#rows-warmup'), $('#rows-weight').val(), warmupApp.programs[0].exercises[5])
		}	

		function updateWorkout(parent, weight, exercise) {
			var initial = parent.children().length == 0

			parent.empty();

			for (var i = 0; i < exercise.workouts.length; i++) {
				var setWeight = findWeight(exercise.workouts[i], weight);
				parent.append('<li>' + 
					printSet(exercise.workouts[i].sets, 
					exercise.workouts[i].reps, 
					setWeight) + ' (' + calculateBarbellWeights(setWeight) + ')</li>');
			}
			if (!initial)
				parent.listview('refresh');
		}

		function calculateBarbellWeights(weight) {
			weight -= warmupApp.barWeight();

			if (weight === 0)
				return "Bar";

			weight /= 2;

			var weight_45 = 0;
			var weight_35 = 0;
			var weight_25 = 0;
			var weight_10 = 0;
			var weight_5 = 0;
			var weight_2half = 0;

			while (weight > 0) {
				if (weight >= warmupApp.weights()[0]) {
					weight_45 += 1;
					weight -= warmupApp.weights()[0];
					continue;
				}
				else if (weight >= warmupApp.weights()[1]) {
					weight_35 += 1;
					weight -= warmupApp.weights()[1];
					continue;					
				}
				else if (weight >= warmupApp.weights()[2]) {
					weight_25 += 1;
					weight -= warmupApp.weights()[2];
					continue;					
				}
				else if (weight >= warmupApp.weights()[3]) {
					weight_10 += 1;
					weight -= warmupApp.weights()[3];
					continue;					
				}
				else if (weight >= warmupApp.weights()[4]) {
					weight_5 += 1;
					weight -= warmupApp.weights()[4];
					continue;					
				}
				else {
					weight_2half += 1;
					weight -= warmupApp.weights()[5];
					continue;					
				}				
			}

			var result = "";

			if (weight_45 != 0) 
				result += printWeightCountSubstring(weight_45, warmupApp.weights()[0].toString());
			if (weight_35 != 0)
				result += printWeightCountSubstring(weight_35, warmupApp.weights()[1].toString());
			if (weight_25 != 0)
				result += printWeightCountSubstring(weight_25, warmupApp.weights()[2].toString());
			if (weight_10 != 0)
				result += printWeightCountSubstring(weight_10, warmupApp.weights()[3].toString());
			if (weight_5 != 0) 
				result += printWeightCountSubstring(weight_5, warmupApp.weights()[4].toString());
			if (weight_2half != 0)
				result += printWeightCountSubstring(weight_2half, warmupApp.weights()[5].toString());

			return $.trim(result);
		}

		function printWeightCountSubstring(weight, text) {
			if (weight > 1)
				return weight + "x" + text + " ";
			else
				return text + " ";
		}

		function findWeight(exercise, weight) {
			if (exercise.multiplier != undefined)
				return roundDown(exercise.multiplier * weight);
			else
				return exercise.weight;
		}
		
		function printSet(sets, reps, weight) {
			var output = sets + "x" + reps + " " + weight;
			if (warmupApp.metric)
				return output + " kgs"
			else 
				return output + " lbs"
		}

		function roundDown(num) {
			if (num - (num % 5) < warmupApp.barWeight())
				return warmupApp.barWeight();
			else
				return num - (num % 5);
		}		

	</script>
</head> 

	
<body> 


<div data-role="page" id="main">

	<div data-role="header">
		<h1>Warmup Calculator</h1>
	</div>

	<div data-role="content" >	
		<h2>Getting Started</h2>
		
		<p>Getting started with warmup sets for Starting Strength is easy.  Choose an exercise, and then set your target weight.  Your warmup sets will then be automatically
		calculated.</p>	
		
		<h3>Choose an exercise:</h3>
		<div id="exercises">
		</div>
		<p><a href="#squats" data-role="button" id="squats-link">Squats</a></p>	
		<p><a href="#bench" data-role="button" id="bench-link">Bench Press</a></p>	
		<p><a href="#deadlift" data-role="button" id="deadlift-link">Deadlifts</a></p>	
		<p><a href="#press" data-role="button" id="press-link">Press</a></p>
		<p><a href="#powerclean" data-role="button" id="powerclean-link">Power Clean</a></p> 
		<p><a href="#rows" data-role="button" id="rows-link">Rows</a></p> 
		
		<hr />
		<h4>Settings</h4>

		<label for="units">Unit system:</label>
		<select name="slider" id="units" data-role="slider">
			<option value="lbs">Pounds</option>
			<option value="kgs">Kilograms</option>
		</select> 
		
	</div>
	
	<div data-role="footer" data-theme="d">
		<h4>&copy; 2012 Nicholas Munson</h4>
	</div>
</div>


<div data-role="page" id="squats">

	<div data-role="header">
		<h1>Warmup Calculator</h1>
	</div>

	<div data-role="content">	
		<h2>Squats</h2>
		<p>Choose your working weight.  Your warmup sets will then be calculated as well as the weights you need to put on each bar side.</p>
	   	<div id="squats-weight-container">
	   		<label for="squats-weight">Weight:</label>
	   		<input type="range" name="squats-weight" id="squats-weight" value="100" min="45" max="500" step="5" />	
		</div>
		<ul data-role="listview" data-inset="true" id="squats-warmup">
		</ul>
		<p><a href="#main" data-direction="reverse" data-role="button">Choose another exercise</a></p>	
		
	</div>
	
	<div data-role="footer" data-theme="d">
		<h4>&copy; 2012 Nicholas Munson</h4>
	</div>
</div>


<div data-role="page" id="bench">

	<div data-role="header">
		<h1>Warmup Calculator</h1>
	</div>

	<div data-role="content">	
		<h2>Bench Press</h2>
		<p>Choose your working weight.  Your warmup sets will then be calculated as well as the weights you need to put on each bar side.</p>
	   	<div id="bench-weight-container">
	   		<label for="bench-weight">Weight:</label>
	   		<input type="range" name="bench-weight" id="bench-weight" value="150" min="45" max="500" step="5" />	
		</div>
		<ul data-role="listview" data-inset="true" id="bench-warmup">
		</ul>
		<p><a href="#main" data-direction="reverse" data-role="button">Choose another exercise</a></p>	
		
	</div>
	
	<div data-role="footer" data-theme="d">
		<h4>&copy; 2012 Nicholas Munson</h4>
	</div>
</div>


<div data-role="page" id="deadlift">

	<div data-role="header">
		<h1>Warmup Calculator</h1>
	</div>

	<div data-role="content">	
		<h2>Deadlift</h2>
		<p>Choose your working weight.  Your warmup sets will then be calculated as well as the weights you need to put on each bar side.</p>
	   	<div id="deadlift-weight-container">
	   		<label for="deadlift-weight">Weight:</label>
	   		<input type="range" name="deadlift-weight" id="deadlift-weight" value="200" min="45" max="600" step="5" />	
		</div>
		<ul data-role="listview" data-inset="true" id="deadlift-warmup">
		</ul>
		<p><a href="#main" data-direction="reverse" data-role="button">Choose another exercise</a></p>	
		
	</div>
	
	<div data-role="footer" data-theme="d">
		<h4>&copy; 2012 Nicholas Munson</h4>
	</div>
</div>


<div data-role="page" id="press">

	<div data-role="header">
		<h1>Warmup Calculator</h1>
	</div>

	<div data-role="content">	
		<h2>Press</h2>
		<p>Choose your working weight.  Your warmup sets will then be calculated as well as the weights you need to put on each bar side.</p>
	   	<div id="press-weight-container">
	   		<label for="press-weight">Weight:</label>
	   		<input type="range" name="press-weight" id="press-weight" value="100" min="45" max="250" step="5" />	
		</div>
		<ul data-role="listview" data-inset="true" id="press-warmup">
		</ul>
		<p><a href="#main" data-direction="reverse" data-role="button">Choose another exercise</a></p>	
		
	</div>

	<div data-role="footer" data-theme="d">
		<h4>&copy; 2012 Nicholas Munson</h4>
	</div>
</div>


<div data-role="page" id="powerclean">

	<div data-role="header">
		<h1>Warmup Calculator</h1>
	</div>

	<div data-role="content">	
		<h2>Power Clean</h2>
		<p>Choose your working weight.  Your warmup sets will then be calculated as well as the weights you need to put on each bar side.</p>
	   	<div id="powerclean-weight-container">
	   		<label for="powerclean-weight">Weight:</label>
	   		<input type="range" name="powerclean-weight" id="powerclean-weight" value="100" min="45" max="350" step="5" />	
		</div>
		<ul data-role="listview" data-inset="true" id="powerclean-warmup">
		</ul>
		<p><a href="#main" data-direction="reverse" data-role="button">Choose another exercise</a></p>	
		
	</div>
	
	<div data-role="footer" data-theme="d">
		<h4>&copy; 2012 Nicholas Munson</h4>
	</div>
</div>


<div data-role="page" id="rows">

	<div data-role="header">
		<h1>Warmup Calculator</h1>
	</div>

	<div data-role="content">	
		<h2>Rows</h2>
		<p>Choose your working weight.  Your warmup sets will then be calculated as well as the weights you need to put on each bar side.</p>
	   	<div id="rows-weight-container">
	   		<label for="rows-weight">Weight:</label>
	   		<input type="range" name="rows-weight" id="rows-weight" value="100" min="45" max="350" step="5" />	
		</div>
		<ul data-role="listview" data-inset="true" id="rows-warmup">
		</ul>
		<p><a href="#main" data-direction="reverse" data-role="button">Choose another exercise</a></p>	
		
	</div>
	
	<div data-role="footer" data-theme="d">
		<h4>&copy; 2012 Nicholas Munson</h4>
	</div>
</div>


</body>
</html>
